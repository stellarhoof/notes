var T=Object.defineProperty,B=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var w=(e,t,a)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))x.call(t,a)&&w(e,a,t[a]);if(c)for(var a of c(t))b.call(t,a)&&w(e,a,t[a]);return e},u=(e,t)=>B(e,O(t));var v=(e,t)=>{var a={};for(var l in e)x.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&c)for(var l of c(e))t.indexOf(l)<0&&b.call(e,l)&&(a[l]=e[l]);return a};import{f as s,p as h,o as P,j as k,F as j,a as d,C as L,S as g,B as R,W as A,R as I,b as N,c as z,d as E,t as o,u as M,e as _,g as D,h as G,i as J}from"./vendor.304b2213.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}};W();let f={template:Symbol("template"),field:Symbol("field")},q=e=>e.startsWith("{{#")?f.template:f.field,p=e=>s.replace(/{{#?\s*([\w\/:]+)\s*}}/g,(t,a)=>s.getOr(s.constant(t),q(t),e)(a,t)),S=e=>`{{${e.join(":")}}}`,H=e=>`{{#${e}}}`,K=e=>{let t=[],a=(r="")=>h.isAbsolute(r)?r:h.join(h.dirname(s.last(t)||"/"),r),l={[f.field]:r=>S([...t,a(r)]),[f.template]:(r,i)=>{let n=a(r);t.push(n);let F=p(l)(e[n]);return t.pop(),F||H(n)}};return p(l)},V=(e={})=>p({[f.field]:t=>(e[t]=s.add(e[t],1),S([t,e[t]]))}),$=s.flow(s.split(":"),s.nth(-2)),Q=(e,t)=>p({[f.field]:(a,l)=>{let r=$(a),i=s.has(r,t);return`<a ${i?"href":""} data-exists=${i} data-path=${a}>${l}</a>`},[f.template]:(a,l)=>{let r=s.has(a,e);return`<a ${r?"href":""} data-exists=${r} data-path=${a}>${l}</a>`}}),U=(e,t)=>s.flow(K(e),V(),Q(e,t)),X=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),Y=e=>p({[f.field]:(t,a)=>{let l=e.get(t);return s.isEmpty(l)?a:s.isArray(l)?X.format(l):l}}),Z=async()=>{let e={templates:{},fields:{}},t=new TextDecoder;for(let a of await A({recursive:!0})){let l=s.head(a.name.match("(field|template)$"));if(l){let r=a.webkitRelativePath.replace(/\w+(.*)\.(field|template)$/,(i,n)=>n);e[`${l}s`][r]=t.decode(await a.arrayBuffer())}}return e},ee=e=>{let[t,...a]=s.map(l=>s.trim(l,`
`),s.split(`
-
`,e));return{type:t,options:a}},te=r=>{var i=r,{field:e,type:t,options:a}=i,l=v(i,["field","type","options"]);return t==="exclusive"?d(I,u(m({size:"sm"},l),{children:d(g,{children:s.map(n=>d(N,{value:n,children:n},n),a)})})):d(z,u(m({size:"sm"},l),{children:d(g,{children:s.map(n=>d(E,{value:n,children:n},n),a)})}))},ae=({store:e})=>k(j,{w:"100vw",h:"100vh",fontFamily:"monospace",sx:{"> *:not(hr)":{flex:1,p:4,h:"100%",overflow:"scroll"},a:{bg:"yellow.100",boxShadow:"0 1px 2px 0px #ECC94B","&[data-exists=true]":{cursor:"pointer",":hover":{bg:"yellow.200"}},"&[data-exists=false]":{bg:"red.100",boxShadow:"0 1px 2px 0px #FC8181"},[`&[data-path="${e.field}"]`]:{bg:"green.100",border:"10px black",boxShadow:"0 1px 2px 0px #48BB78",":hover":{bg:"green.200"}}}},children:[d(L,{whiteSpace:"pre-wrap",dangerouslySetInnerHTML:{__html:Y(e.data)(e.template)},onClick:t=>t.target.tagName==="A"&&t.target.dataset.exists==="true"&&(e.field=t.target.dataset.path)}),k(g,{children:[d(R,{size:"sm",onClick:async()=>{let{fields:t,templates:a}=await Z();e.templates=a,e.fields=t,e.template=U(a,t)("{{#nota}}")},children:"Reload files"}),d(te,m({value:e.data.get(e.field),onChange:t=>e.data.set(e.field,t)},ee(s.get($(e.field),e.fields))),e.field)]})]});var le=P(ae),re=o.model({data:o.map(o.union(o.string,o.array(o.string))),template:o.maybe(o.string),field:o.maybe(o.string),templates:o.maybe(o.frozen(o.map(o.string))),fields:o.maybe(o.frozen(o.map(o.string)))});let C=window.localStorage,y=re.create(JSON.parse(C.getItem("store"))||void 0);M(y);_(y,e=>C.setItem("store",JSON.stringify(e)));D.render(d(G.StrictMode,{children:d(J,{children:d(le,{store:y})})}),document.getElementById("root"));
